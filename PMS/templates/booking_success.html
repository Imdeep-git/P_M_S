{% extends 'base.html' %}
{% load static %}

{% block title %}Booking Successful{% endblock %}

{% block styles %}
<style>
.ticket-container {
    max-width: 450px;
    width: 90%;
    margin: 50px auto;
    padding: 30px 25px;
    border: 2px dashed #4CAF50;
    border-radius: 20px;
    background-color: #f9fff9;
    text-align: center;
    font-family: 'Arial', sans-serif;
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    position: relative;
    transition: transform 0.3s ease;
}

.ticket-container h2 { color: #4CAF50; margin-bottom: 25px; font-size: 1.8rem; }

.ticket-detail { margin: 15px 0; font-size: 1.1rem; font-weight: bold; display: flex; justify-content: center; align-items: center; gap: 10px; flex-wrap: wrap; }
.ticket-detail span { color: #333; }

.qr-code { margin: 20px 0; }
.qr-code img { width: 150px; height: 150px; border-radius: 10px; image-rendering: pixelated; }

.copy-btn, .screenshot-btn {
    margin-top: 10px;
    padding: 8px 15px;
    border: none;
    background-color: #4CAF50;
    color: white;
    cursor: pointer;
    border-radius: 5px;
    font-size: 0.9rem;
}
</style>
{% endblock %}

{% block content %}
<div class="ticket-container" id="ticketContainer">
    <h2>Booking Confirmed!</h2>

    <div class="ticket-detail">
        <span>Token:</span> <span id="bookingToken">{{ token }}</span>
        <button class="copy-btn" data-copy-target="bookingToken">Copy</button>
    </div>

    <div class="ticket-detail">
        <span>PIN:</span> <span id="bookingPin">{{ pin }}</span>
        <button class="copy-btn" data-copy-target="bookingPin">Copy</button>
    </div>

    {% if qr_img_base64 %}
    <div class="qr-code">
        <img id="qrCodeImage" src="data:image/png;base64,{{ qr_img_base64 }}" alt="QR Code">
    </div>
    {% endif %}

    <button class="screenshot-btn" id="screenshotBtn">Download Ticket</button>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="{% static 'js/booking_success.js'%}"></script>
{% endblock %}
